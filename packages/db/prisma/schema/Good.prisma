// The real item that is being sold.
model Good {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  isArchived Boolean @default(false)

  collection    Collection?        @relation(fields: [collectionId], references: [id])
  group         GoodsGroup?        @relation(fields: [groupId], references: [id])
  localizations GoodLocalization[]
  attributes    AttributeValue[]
  stock         Stock[]
  media         GoodMedia[]
  promotions    PricePromotion[]

  collectionId Int?
  groupId      Int?

  @@index([id])
  @@index([groupId])
}

model GoodLocalization {
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  language String
  name     String

  good Good @relation(fields: [goodId], references: [id])

  goodId Int

  @@id([goodId, language])
  @@index([goodId, language])
  @@index([goodId])
  @@index([language])
}

model GoodMedia {
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  file File @relation(fields: [fileId], references: [id])
  good Good @relation(fields: [goodId], references: [id])

  fileId Int
  goodId Int

  @@id([fileId, goodId])
  @@index([fileId, goodId])
  @@index([fileId])
  @@index([goodId])
}

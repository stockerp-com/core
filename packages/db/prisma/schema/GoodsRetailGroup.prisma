// A group of goods that share a vast majority of their characteristics.
model GoodsRetailGroup {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  goods           Good[]
  localizations   GoodsRetailGroupLocalization[]
  characteristics Characteristic[]
  media           GoodsRetailGroupMedia[]
  manufacturer    Manufacturer?                  @relation(fields: [manufacturerId], references: [coutnerpartyId])

  manufacturerId Int?

  @@index([id])
}

model GoodsRetailGroupLocalization {
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  language          String
  name              String
  description       String   @db.Text
  metaTitle         String
  metaDesc          String   @db.Text
  slug              String
  focusKeyword      String
  secondaryKeywords String[]

  group GoodsRetailGroup @relation(fields: [groupId], references: [id])

  groupId Int

  @@id([groupId, language])
  @@index([groupId, language])
  @@index([groupId])
  @@index([language])
}

model GoodsRetailGroupMedia {
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  file  File             @relation(fields: [fileKey], references: [key])
  group GoodsRetailGroup @relation(fields: [goodsGroupId], references: [id])

  fileKey      String
  goodsGroupId Int

  @@id([fileKey, goodsGroupId])
  @@index([fileKey, goodsGroupId])
  @@index([fileKey])
  @@index([goodsGroupId])
}
